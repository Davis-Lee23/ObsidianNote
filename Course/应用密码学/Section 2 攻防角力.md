私有、对称加密系统：加密=解密
公共、非对称加密系统：加密 ！=解密
加密的叫公钥
解密的叫私钥

展示了多种协议Protocol，目的是生成一个AB共享的key K

**Protocol 0**：让A选个K——让T生成密钥K更好
**Protocol 1**：man in the middle攻击，A给T发送的请求会被伪造，被发送人是假的
**Protocol 2**：A加密被发送人？没用，一样被伪造
**Protocol 3**：将被发送人一起绑到消息中。加强了攻击者能力，攻击者获得了旧的K'密钥绑定的AB消息，再假冒T发给A旧钥匙，这样就可以用旧钥匙解密。

这种重放协议先前运行中的旧消息的攻击称为消息重放攻击。（怎么和印象里的不一样）

可以添加nonce来避免重放攻击

**Nonce**
nonce是一个新生成的随机数，一般是”现在“生成的，可以用作身份验证。


Protocol 4：添加了nonce。前面确实没问题，但是在后面没有nonce的地方M又可以假冒成A。依然无法完全阻挡重放攻击。
有人建议加入timestamp，记录发送时间、发送和接收的时间差，很容易发现旧的消息。


Protocol 5：加入了时间戳timestamp。问题是怎么保证所有人是完全同步时钟？

 **总结:世上没有完美的防御。**

### 杂记


