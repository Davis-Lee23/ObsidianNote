### 动机
来自恶意客户端的攻击以及中央服务器的不可信，让联邦学习安全性受到质疑。提出一种基于区块链的联邦学习框架，同时运用了一种新颖的委员会共识机制减少共识计算时间与恶意攻击。

补充共识动机：区块链有效解决了中心化的问题，但是区块间的共识计算通常效率低下，传统的广播共识非常耗时。因此本文提出了一种新的共识机制。

### 区块链的作用
区块链技术构建了一个稳定，公平且高度安全的环境。其核心的去中心化特性解决了传统中央服务器在广播时对带宽的巨大需求，从而保障了服务的稳定性。此外，去中心化消除了中央服务器可能对部分用户存在偏见或自身具有恶意操作的风险。
我们还可以利用区块链来存储和共享全局模型，并使用智能合约来执行原本中央服务器的职能，如客户端管理、全局模型维护和梯度聚合。

But，对计算和网络的需求转接到了各个节点上，尤其是在共识计算时开销巨大（设计新共识机制的动机）

### 技术路线
区块链：采用联盟链FISCO BOCS
+ **委员会共识机制(Committee Consensus Mechanism, CCM)**：首先选择出一些诚实节点成立委员会，负责验证本地更新和区块生成，其余节点负责本地训练和发送更新到委员会。只有验证合格的更新才会被打包加入到区块链，并且在下一轮开始前，新的委员会基于得分被重新选举。显然，验证更新得到分数是很关键的一环。作者在此采用了该做法：每一名委员会成员将自己的数据作为验证集去验证上传的更新，并将准确率作为参考分数，取所有委员会分数的中位数作为本轮得分。该方法十分简易，不再需要过多的操作，同时增加了攻击者成本，提升了安全性和稳定性。
+ 激励机制Incentive：作者称之为profit sharing by contribution. 缴纳参与费即可永久获取最新全局模型，积极参与者在每次聚合之后根据得分获得奖励。最直观的就是让高分者成为下一轮committee.
+ 恶意节点处理：当恶意委员超出50%时即攻击成功，不过这对于攻击者而言成本大于收益。
+ 存储策略：历史模型和更新会占用大量空间，本文采用的策略是存储小的节点可以删除历史模型和更新，仅让核心节点保存所有历史数据。该方案会让区块链可信度下降，作者推荐使用可信第三方存储，方便备份和回滚(也许这里可以有什么idea?)


### 框架图
训练流程图
![[框架图1.png]]
节点示意图
![[节点存储结构示意图.png]]
### 实验
#### 实验设置
数据集：FEMNIST，采用不等量分割及non-iid
软件：python3.7.6，Tensorflow1.14，FISCO BOCS
硬件：2080Ti
模型：AlexNet，但是代码中用的只是一个线性结构，不是AlexNet

#### 实验结果
不同活跃节点比例（k）下的性能比较，几乎与FedAvg持平(Basic=Feavg)
![[Pic1.png]]

不同恶意节点比例下的性能比较（假设恶意节点共谋）。固定k为10%，每轮取其中20%为委员会。
相比于没有任何防御的Basic方法和CwMed方法，BFLC显然更高。
![[Pic2.png]]

最后的传输效率对比看着怪怪的

### 未来工作
1. 传输效率：区块链传输效率低，消耗硬盘与带宽资源。可以研究如何在保训练稳定下降低传输消耗。
2. 公共场景：本文采用联盟链，这需要一定门槛。如何设计一个公链，采取什么共识策略，怎么防御恶意节点，都有待研究。
3. 轻量级训练：即解决设备异构性。性能较差又寻求隐私保护的设备，我们该如何满足它们的需求？

