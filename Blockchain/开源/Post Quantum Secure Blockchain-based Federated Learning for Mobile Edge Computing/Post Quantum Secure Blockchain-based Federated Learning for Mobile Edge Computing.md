### 动机
现有的基于区块链的联邦学习BFL的同步假设不适用于MEC，欠缺特定的激励机制鼓励客户端，而且也无法防范量子计算的攻击。本文提出BFL-MEC框架，一种完全异步的区块链联邦学习框架，并且提出了新的激励机制与聚合方法，此外还利用了后量子签名应对恶意攻击。

### 解决思路&技术路线
**后量子签名：**
传统的数字签名依赖于经典密码学方法如RSA容易被量子计算破解，采用post-quantum cryptography (PQC)确保量子安全。采用格密码Lattice-based Cryptography（没看原理）。
[未来数字签名方案博客]([未来的数字签名方案：Dilithium、FALCON 和 SPHINCS+_dilithium算法-CSDN博客](https://blog.csdn.net/mutourend/article/details/130667160))
数字签名主要用于防篡改。

算法一解释说明：
	1-5：一行生成即可
	7-15：客户端利用密钥签名
	17-19：验证PQC
![[Pasted image 20240312214530.png]]

**隐私与安全权衡：**
直接将客户端的梯度记录在链上显然过于白盒了，让边缘节点缓存所有未聚合局部梯度(Dordis文章用了redis缓存别的东西)，聚合一次之后再上链，保障隐私且节省空间。

**异步策略：**
客户端：客户端超过预设数据集大小N就开始训练，每次模型更新前都会查询一次全局模型。当出现
掉线情况时，本地继续训练，直到重新连接之后，**将断线期间的所有权重平均**后上传。
边缘节点：未聚合梯度数量到达阈值φ，构建新的Block后发放奖励

**客户端贡献**
主要有两种策略，一是保留所有梯度，二是去除低贡献度梯度。
如何确定客户端贡献？先将梯度聚类，然后用全局更新与局部更新的余弦距离作为标准([距离相似度总结]([距离相似度计算总结（欧式距离、余弦相似度、杰卡德、互信息等18种） - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/354289511)))，可以防止客户端作弊和作恶上传劣质虚假梯度

**聚合策略：**
直接平均对于不同样本量的客户端不公平，采用基于贡献度方式来分配聚合权重。
### 区块链的作用
不可篡改，可追溯，避免单点故障。
激励机制给客户端提供动力。

### 格上数字签名的使用
Demo. 
![[Pasted image 20240312221523.png]]


框架图
![[Pasted image 20240313113214.png]]
块结构
![[Pasted image 20240313115427.png]]


### 实验
量子安全算法签名，解密平均时长更短
![[Pasted image 20240313142817.png]]

N和φ的关系分析，收敛时间：小的φ可以让全局和局部更快的进行知识转移提高性能。N影响局部的学习效果，N太小会影响精度。
![[Pasted image 20240313150449.png]]

如果丢弃贡献度低的梯度，收敛速度会比FedAvg还快
![[Pasted image 20240313150648.png]]
两种攻击方式验证：
a：假设攻击者很狡猾，被发现后会不断伪装自己成为另一个节点。设10个客户端，其中3个为恶意，被发现后会随机替换另一个节点为恶意节点。IID数据能稳定在80%，Non-IID也有60%+
b：攻击者是好奇的客户端，正常发送数据的同时进行了隐私攻击。被发现后它们的奖励会被限制的很低。
![[Pasted image 20240313150817.png]]