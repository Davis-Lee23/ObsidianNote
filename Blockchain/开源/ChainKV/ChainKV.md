
被SIGMOD录用
# Abstract（作者精简版）
Motivation：键值存储技术与区块链技术的简单堆叠忽略了区块链语义，使得区块链存储面临较大的读写放大问题。此外，随着以太坊网络的扩展，规模巨大的数据量进一步加剧了存储负担。目前多数研究都集中在分片、数据归档、去中心化的分布式存储等方面减轻存储层的负担，而忽略了以太坊语义与存储引擎特性之间的不兼容性。

Method：本论文创新性地提出了基于区块链数据语义的键值存储引擎设计，它负责提取区块链协议层中的区块数据语义并将它们传递到底层的键值存储引擎中。
详细的说：首先，基于以太坊区块链语义，ChainKV将不同类型的数据分别存储在KV存储器的多个存储区域中，以缓解读/写放大问题。其次，借鉴认证数据结构（ADS）中的验证过程机制，提出了一种新的ADS数据转化器，以利用ADS持久化时的数据局部性。此外，采用一种新的空间博弈缓存策略，协调两个独立存储区域该高速缓存空间管理。最后，提出了一种可选的轻量级节点崩溃恢复机制，以消除以太坊协议和存储引擎之间的功能冗余。

Result：在超过460M个区块的数据集下，实验结果表明本论文提出的方法可以在现有Ethereum系统的基础上分别提升1.99倍同步性能和4.20倍的交易处理速度。


# Introduction
+ 第一段：介绍区块链应用，公链吞吐量低，这不仅是共识算法的原因，还有底层存储引擎的性能限制（处理交易的速度），随着历史数据的积累，存储层的负担越来越严重。
+ 第二段：引出以太坊和基于LSM-tree的KV存储。随着去看的开采，性能相比早期高出数百倍。
+ 第三段：通过一些实验和对以太坊工作流程的分析，发现以太坊严重的IO开销来自两方面：①目前以太坊主要关注数据可用性，缺乏对数据的细粒度管理 ②持久化MPT节点的方法放弃了数据局部性，引入了严重的读写放大
+ 第四段：综上所述，以太坊存储负担严重的根本原因在于区块链数据语义层与底层存储引擎层之间缺乏连接和协调。介绍了三类过去的研究方向：一是Partial storage，二是Sharding，三是高性能ADS。都没有考虑到语义。
+ 第五段：提出了ChainKV，各种七七八八的新东西。
+ 第六段：实现了基于Geth的ChainKV原型
+ 贡献总结：1、3、5比较有意义。
	1. 这是首个从数据流角度弥合以太坊协议层和存储层之间的语义差距来解决I/O瓶颈的方法。
	2. 分析了以太坊的IO瓶颈来源
	3. 我们提出了一个新的存储引擎，ChainKV，通过隔离不同数据类型的管理来弥合以太坊数据层与其底层存储层之间的语义鸿沟。
	4. 我们提出了一种先进的ADS、前缀MPT和空间博弈缓存机制来探索查询过程的时空局部性。我们还提出了一个可选的轻量级崩溃恢复机制，以提高数据同步的性能。
	5. 开源了ChainKV样例


# Background
简要介绍了以太坊基础，MPT结构和功能，以太坊用的存储引擎。

### 以太坊系统
可以视作完全备份的去中心化数据库，每个节点都记录了所有交易历史。每个块都包含食物列表和前一个块的哈希。节点可以分为full nodes和light nodes。前者啥都有用来确保数据一致性，后者仅存储区块头，不具备验证能力，本文节点都是全节点。

以太坊数据级别的工作流程如下：
